### Unity Layer / LayerMask / RayCast / 비트연산 [TIL]

**[Layer]**

**# 오브젝트의 인스펙터창 우측 상단에서 태그와 비슷하게 레이어 설정이 가능**

**-> 태그가 별명이라면 레이어는 소속의 느낌?**

**# add layer를 하면 종류를 추가할 수 있다**

[**![](https://blogger.googleusercontent.com/img/a/AVvXsEjidJ1r6-a2fir6WEKhbKnpnZ4hmRHN-DpikTxRkhBb5NtKCXjukcPJAIRNhZDAYs2a_Kn3Uak7ESBMRdOCBET7eX61bKdUGdb-SdP47ccBgZullQRIcIVvjLj_1LClILkkl2SPEcJXpHaYdcN7Yt7_vy5LSLohFlTzXtEQ1ebjXZihKx6VS_AZbUijNW8H)**](https://www.blogger.com/blog/post/edit/3583706664799492072/4225147453530975059#)

**  
#현재 6, 7, 8번의 레이어를 추가해 준 상태이다**

**# 레이어의 번호에 따라 ob00000000000000000000000000000001 부터 (layer0)**

**ob0...0010 (layer2) , ob0...0100 (layer3) 의 값을 가진다**

[**![](https://blogger.googleusercontent.com/img/a/AVvXsEjWqDsS7fGcZi-_MsjB9m5etrd96dznSUQY41jzbFqPrTyEZjg55fBV0kkQfK_kNR8BWm_SWl9urWxVej5rxuzLJ0IKX_plYutKWA9n1ZcagTCf1DpvBNShH963vHBw4sMilsJqgsUn2xySL98kE_pEKzUMLA8l85yAGw7PGS3TLqKS836u9dylAGthjoiR)**](https://www.blogger.com/blog/post/edit/3583706664799492072/4225147453530975059#)

**# 스크립트에서 직렬화 후 변수 선언해주면 스크립트 컴포넌트에서 레이어 설정이 가능하다**

[**![](https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiW-ckwwecd7kL8uRCADKFvQxcGrB1Xggh-rreveb4Ou98J452XItnvI1dyZOd4tS_9Sn60LABy06Ho3JeVtT9bcrH1GLircfrWVU3RtAUuAO3c7c1oOXe40z6SN7yADojXVGjmNQn7zxRrwPLK7addtmXEvX4OIP1_GEEjytyK9tDqCAahY1_iiS3_3bW_/s320/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-12-08%20204044.png)**](https://www.blogger.com/blog/post/edit/3583706664799492072/4225147453530975059#)

**# 아래와 같은 식처럼 if조건문을 활용해 충돌체가 몇번 레이어인지 판단 가능하다**

[**![](https://blogger.googleusercontent.com/img/a/AVvXsEjbT4u9aat6ZYCyjgsRyCUdUop050tPFyQmNmb9X91cqUlFTJFdmCVJ-vwzk6LpF8pKNl5whX7uJoTIqW7Xkj-5XVvH-kcdJKnvi33ehJRqqmtFqeJXFwn1NP_lnfzTNtN9qndTodavt5Sap256DMBP10pf4MGxpQfJnBtT-qmSyCxv3rzQKKqYGqarDH54)**](https://www.blogger.com/blog/post/edit/3583706664799492072/4225147453530975059#)

**# or 를 사용하면 여러가지 레이어 체크도 가능하다** 

[**![](https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgpMsxQfBPlO59F2v-jmfAJJGSQS4jFNhbqXyhaUvLN-uA5a3UiFuQN6itrGQmsoYLtbSfDwmEDv9UR-5fVN-q8ufJhFQuCPcmQVzXEPKiT3v6b_mLE420aQEicUmhTuprqutF3tBiGhcAikvqbDLJgNfwlvYPJP4zyadJ3O0fALkdNkx60i01WPk0o5TI5/s320/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-12-08%20204053.png)**](https://www.blogger.com/blog/post/edit/3583706664799492072/4225147453530975059#)

**# 강의에서는 발사체가 벽과 같은 오브젝트와의 충돌여부를 체크하고 오브젝트를 삭제하는 과정에서 활용되었다.**

**[ LayerMask ] - 레이어에 대한 처리를 효율적으로 하는 방법** 

**32개 레이어 활용 / 정수형 변수의 각 비트를 할당하여 처리한다**

**-> 1개의 변수를 여러개의 bool값 처럼 처리하는 방법**

**LayerMask mask = LayerMask.GetMask("Monster") | LayerMask.GetMask("Wall");**

**// int mask = (1 << 8) | (1 << 9); 와 동일**

**RaycastHit hit;**

**if (Physics.Raycast(ray, out hit, 100.0f, mask))**

**{**

   **Debug.Log(hit1.collider.gameObject.name);**

**}**

**#비트옮기기 - 비트를 1로 만든다 (shift) <<, >>** 

**-> 왼쪽으로 가면 곱하기2, 오른쪽으로 가면 나누기2**

**Raycast로 특정 레이어를 가진 오브젝트를 감지하는 경우에 종종 사용**

**비트가 일정 범위이상 넘어가면? 사라진다**

**#2가지 이상의 레이어를 판단하고 싶다면? or를 사용하자**

**int layerMask = (1 << 8) | (1 << 10) ;**

**#비트가 1인지 확인하기 - 비트가 1인지 확인한다 (AND)**

**bool isLayer8Included = (layerMask & (1 << 8)) != 0;**

**# 특정 레이어 제외하고 다 검사하기 - NOT 사용 (~)**

**# GetMask 함수를 활용하면 비트연산 사용없이 쉽게 계산 가능**

**-> NameToLayer - 이름을 통해서 도출하기**

**# LayerMask.Contains(int layerIndex)**

**-> 특정한 레이어인덱스를 포함하고 있는지 체크하기 위해 사용**

**#System.Flags - enum을 중첩 가능하게 해주는 키워드 / 깃발체크**