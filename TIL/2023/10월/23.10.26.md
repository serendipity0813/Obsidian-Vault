### 사전캠프 10일차 [[TIL]]

[유니티 3주차 강의 진행 완료]

  

[![](https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEge64yVyaogRHNo0weKKF2ezklUMg8SMngR7fa6NSk_aSEVIK9wSfzn3f3LnobDTpBz8-BoFoBj0Z4WR2mXPG5xlY2dzqfw7Jp6nDlDm8JdSiUFQe4r6jas2vE12kAb2hqznkNn8uioG35ZfchAwRQeZ50t75XlQrCt0LdJWdsoj-strolg7YFuOhFQD34Z/s320/dog%20vs%20cat.png)](https://www.blogger.com/blog/post/edit/3583706664799492072/6607008035342800076#)

  

  

![](https://img1.blogblog.com/img/video_object.png)

  

  

# 나타나는 고양이로부터 생선가게를 지키는 슈팅게임 구현

-> 고양이 먹이 발사하기

-> 고양이 종류별로 나타내기 / 충돌 / 종료 구

-> 레벨 구성하기 - 레벨업 표기 및 난이도 반영

-> 버그 수정하고 플레이 

-> 3주차 숙제 진행

  

#구현시 어려웠던 부분 및 스스로 피드백

-> 고양이 애니메이션 구현 중 normalCat 에서 C를 소문자로 하여 구현 오류 발생함

-> 마우스 위치 조정 중 좌, 우 반경 고정하는 과정에서 부호를 까먹어서 버그가 있었음

-> kinematic 설정은 어느 정도 이해되었지만 istrigger 는 아직 잘 모르겠음 

-> 구현 중 대소문자 오류 및 몇가지 빼먹는 경우 등의 오류로 인한 버그 발생이 다수 있었으나 스스로 발견한 후 고쳐가는 능력이 조금씩 늘고 있음

  

# 구현 내용 중 중요한 부분 

 -> 버튼 컴포넌트는 sprite 가 아니라 UI Image 에 붙여야 작동하는 점 기억하기

-> 에너지바 구현 과정에서 rendermode 를 world space 로 변경해주기

-> 중력을 무시한 충돌 설정시 kinematic 설정과 istrigger 설정 기억하기

-> 에너지바 구현시 상위 폴더에서 하위 폴더 찾도록 코드 구현하는 방법 기억하기

  

  

#구현 코드내용 기록

  

-> 게임매니저 코드 구현 내용

using System.Collections;

using System.Collections.Generic;

using UnityEngine;

using UnityEngine.UI;

  

public class GameManager : MonoBehaviour

{

    public GameObject dog;

    public GameObject food;

    public GameObject normalCat;

    public GameObject fatCat;

    public GameObject pirateCat;

    public GameObject retryBtn;

    public Text levelText;

    public GameObject levelFront;

    public static GameManager I;

  

    int level = 0;

    int cat = 0;

  

  

    void Awake()

    {

        I = this;

    }

    // Start is called before the first frame update

    void Start()

    {

        Time.timeScale = 1.0f;

        InvokeRepeating("makeFood", 0.0f, 0.1f);

        InvokeRepeating("makeCat", 0.0f, 1.0f);

    }

  

    // Update is called once per frame

    void Update()

    {

    }

  

    void makeFood()

    {

        float x = dog.transform.position.x;

        float y = dog.transform.position.y + 2.0f;

        Instantiate(food, new Vector3(x, y, 0), Quaternion.identity);

  

    }

  

    void makeCat()

    {

        Instantiate(normalCat);

  

        if (level == 1)

        {

            float p = Random.Range(0, 10);

            if (p < 2) Instantiate(normalCat);

        }

        else if (level == 2)

        {

            float p = Random.Range(0, 10);

            if (p < 5) Instantiate(normalCat);

        }

        else if(level == 3)

        {

            float p = Random.Range(0, 10);

            if (p < 6) Instantiate(normalCat);

            Instantiate(fatCat);

        }

        else if(level == 4)

        {

            Instantiate(normalCat);

            Instantiate(fatCat);

            Instantiate(pirateCat);

            float p = Random.Range(0, 10);

            if (p < 5) Instantiate(normalCat);

        }

    }

  

    public void gameOver()

    {

        Time.timeScale = 0.0f;

        retryBtn.SetActive(true);

    }

  

    public void addCat()

    {

        cat += 1;

        level = cat / 5;

  

        levelText.text = level.ToString();

        levelFront.transform.localScale = new Vector3((cat - level * 5) / 5.0f, 1.0f, 1.0f);

    }

}

-> dog 코드 구현 내용

public class dog : MonoBehaviour

{

    // Start is called before the first frame update

    void Start()

    {

    }

  

    // Update is called once per frame

    void Update()

    {

        Vector3 mousePos = Camera.main.ScreenToWorldPoint(Input.mousePosition);

        float x = mousePos.x;

  

        if (x > 8.5f)

            x = 8.5f;

        else if (x < -8.5f)

            x = -8.5f;

  

        transform.position = new Vector3(x, transform.position.y, 0);

    }

}

-> cat 코드 구현 내용

public class cat : MonoBehaviour

{

    float full = 5.0f;

    float energy = 0f;

    bool isfull = false;

    public int type;

  

    // Start is called before the first frame update

    void Start()

    {

        float x = Random.Range(-8.5f, 8.5f);

        float y = 30.0f;

        if(type == 1)

        {

            full = 10f;

        }

        transform.position = new Vector3(x, y, 0);

    }

  

    // Update is called once per frame

    void Update()

    {

        if (energy < full)

        {

            if(type == 0)

            {

                transform.position += new Vector3(0.0f, -0.05f, 0.0f);

            }

            else if(type == 1)

            {

                transform.position += new Vector3(0.0f, -0.03f, 0.0f);

            }

  

            else if (type == 2)

            {

                transform.position += new Vector3(0.0f, -0.1f, 0.0f);

            }

  

            if (transform.position.y < -16f)

            {

                GameManager.I.gameOver();

            }

        }

        else

        {

            if (transform.position.x > 0)

            {

                transform.position += new Vector3(0.05f, 0.0f, 0.0f);

            }

            else

            {

                transform.position += new Vector3(-0.05f, 0.0f, 0.0f);

            }

            Destroy(gameObject, 3.0f);

        }

    }

  

    void OnTriggerEnter2D(Collider2D coll)

    {

        if (coll.gameObject.tag == "food")

        {

            if (energy < full)

            {

                energy += 1.0f;

                Destroy(coll.gameObject);

                gameObject.transform.Find("hungry/Canvas/front").transform.localScale = new Vector3(energy / full, 1.0f, 1.0f);

            }

            else

  

            {

                if (isfull == false)

                {

                    GameManager.I.addCat();

                    gameObject.transform.Find("hungry").gameObject.SetActive(false);

                    gameObject.transform.Find("full").gameObject.SetActive(true);

                    isfull = true;

                }

            }

        }

    }

}

  

-> food, start, retry Btn 구현 내용

public class food : MonoBehaviour

{

    // Start is called before the first frame update

    void Start()

    {

    }

  

    // Update is called once per frame

    void Update()

    {

        transform.position += new Vector3(0.0f, 0.5f, 0.0f);

        if (transform.position.y > 26.0f)

        {

            Destroy(gameObject);

        }

    }

}

public class startBtn : MonoBehaviour

{

    // Start is called before the first frame update

    void Start()

    {

    }

  

    // Update is called once per frame

    void Update()

    {

    }

  

    public void GameStart()

    {

        SceneManager.LoadScene("MainScene");

    }

}

public class retryBtn : MonoBehaviour

{

    // Start is called before the first frame update

    void Start()

    {

    }

  

    // Update is called once per frame

    void Update()

    {

    }

  

    public void Regame()

    {

        SceneManager.LoadScene("MainScene");

    }

}