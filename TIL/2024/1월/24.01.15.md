
### UI를 프리펩화 하여 생성, 관리하기 [[TIL]]

[![](https://blogger.googleusercontent.com/img/a/AVvXsEgYIVz2A1AHQDoNQ_qESs6yYGsIZNLYccg77acP8v7s5jgWdPwBhfRGC25s0qeutFSq-gqWqGry7KqyvbC_mTB7pwfbCQBRXxWg22z8SMsJeRWwoWBd6EhtfClNGZ-FS0h6FJGlhUnMqdRguLn0qRr5ZiOee7LALRRA47wM4DI1VVV_elEBwVK1WmLuJnzN)](https://www.blogger.com/blog/post/edit/3583706664799492072/1032405186525581371#)

  

하나의 씬에서 씬 전환 없이 게임을 진행하면서

게임을 구성하는 UI들을 프리펩화 하여 씬 전환 대신

해당 씬마다 필요한 요소들을 합쳐서 생성 및 제거하는 방식으로 사용하려고 함

  

1. canvas 하위가 아닌 그냥 오브젝트로 생성

- 하나의 프리펩마다 내부에 canvas를 따로 달아서 생성함

  

2. 생성 위치가 0, 0, 0인 오브젝트로 만들어져 화면에 보이지 않음

- 카메라 위치의 z값을 뒤로 쭉 빼서 카메라와 오브젝트 사이의 간격을 만들어 화면에 보이도록 만들었으나 상황마다 뒷 배경이 보이거나 하는 등의 오류가 생김 

-> 이 부분은 아직 미해결

  

3. destroying assets is not permitted to avoid data loss. 오류

- 프리펩화 한 ui를 생성 후 다음 화면으로 넘어가기 위해 이전 ui를 파괴하고 

새로운 ui요소들을 생성하는 과정에서 오류가 발생

- 생성한 프리펩 인스턴스가 아닌 에셋의 프레펩을 삭제하도록 코드가 작성됨

- 생성자와 인스턴스를 나눠서 관리되도록 코드를 작성하여 해결함

  

4. 프리펩화 된 오브젝트의 버튼 event가 적용되지 않아 함수가 실행되지 않음

- ui오브젝트별 스크립트를 따로 만들어서 버튼 이벤트가 작동되도록 함

- 버튼 입력시 어떤 씬으로 변경을 원하는지를 특정 스크립트에 매개변수로 전달

-> 전달받은 매개변수를 바탕으로 하나의 스크립트에서 씬 전환을 관리하도록 함