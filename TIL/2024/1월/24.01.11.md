### 첫 번째 미니게임 프로토타입 구현 (2024.01.11 [TIL])

게임 기본 로직 기획 

- 게임 시작 전 스테이지 숫자에 따라 랜덤위치에 동굴(숨는곳) 생성

- 각 동굴마다 도둑이 생성되며 그중 1명은 보물을 가지고 잇음 (플레이어 에게 보여주기)

- 게임 시작 후 도둑이 랜덤 동굴 위치를 옮겨다님 (보물을 가진 도둑 구분 x)

- 일정 시간이 지나면 도둑들의 움직임이 멈춤 -> n초의 선택 제한시간

- 보물을 가진 도둑이 숨어있는 동굴을 맞추면 플레이어 승리 

- 해당 미니게임 매니저를 싱글톤화 하여 로직 관리

  

#### 동굴과 도둑의 생성 및 관리는 어떻게 할까?

**-> 스테이지 마다 생성되는 동굴의 숫자 및 도둑의 속도를 다르게 하고 싶음

- stage 값을 기준으로 배열의 길이를 설정한 후 배열 길이만큼 동굴 생성

- 동굴이 생성되면서 같이 도둑도 생성되도록 함

- 동굴의 위치는 일정 범위를 기준으로 잡고 그 내부에서 랜덤 생성 + 도둑은 그 중 1곳 

  

### 도둑의 이동은 어떻게 구현할까?

- 미니게임 매니저 싱글톤을 활용하여 동굴의 좌표값을 참조 후 캐싱해두기

- 동굴 중 1 곳을 랜덤으로 지정 후 해당 좌표를 다음에 움직일 타겟포인트로 잡기

**->스테이지 마다 도둑의 속도를 조절하는 방식은?

- MoveToward를 이용하여 현재 위치에서 타겟 위치로 일정 속도로 이동하도록 하고 속도를 조절해주는 매개변수 값을 스테이지 값이 반영되도록 하기

**->Start함수에서 도둑 위치를 이동시키는 함수를 InvokeRepeating 하여 주기적으로 움직이려고하였으나 도둑이 움직이지 않음

- 한 프레임에서만 잠깐 움직이는 메소드가 반영

- update, fixedUpdate 에서 활용하려고 하니 매 순간 타겟 위치가 바뀌고 공이 진동함

- bool값을 활용해 update함수에서 도둑이 동굴에 도착하면 bool 값을 변경하여 움직임을 멈춘 뒤 다음 위치를 지정하고 invoke를 통해 일정시간 딜레이 후 다시 도둑이 움직이도록 시도

**-> 도둑의 타겟포인트가 계속 변하는 것 처럼 진동하는 부분이 계속 지속됨

- 타겟포인트 변경이나 도둑의 움직임을 메소드로 구현하여 update에서 호출하는 방식이 문제라고 생각되어 update 함수 내부에서 코드를 실행하도록 함

- 간단한 if 조건문만 활용하여 랜덤으로 움직이도록 구현은 완료

  

알게된 점

업데이트 함수에서 특정 메소드를 호출할 경우 프레임 단위로 계속 호출하게 될 수 있음

MoveToward, Lerp 등의 오브젝트를 움직이는 함수를 여러번 사용해봄

-> 현재 게임에서는 등속 운동으로 움직임이 필요하여 MoveToward함수 사용

-> 또한 이러한 오브젝트를 움직이는 함수들은 update함수 내부에서 코드구현 되어있어야 자연스럽게 움직임