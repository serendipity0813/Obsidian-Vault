
### 특정 타겟이 숨은 위치 찾는 법 / 캐릭터가 보이는 UI / 게임 진행 방식의 최적화에 대한 고민 [TIL]

 1. 특정 타겟이 숨은 위치 찾는 법

- 찾아야 하는 타겟의 위치가 랜덤으로 이동하므로 플레이어가 클릭한 위치가 특정 타겟이 위치한 곳인지 판단할 필요가 있었음

- 타겟이 되는 오브젝트에 버튼을 달아서 해결해보려 하였지만 프리펩으로 사용되기 때문에 조금 더 좋은 방법에 대해서 고민함

- 타겟에 콜라이더 추가 후 ray를 활용하여 타겟의 tag를 체크하고 확인하는 방식 사용

- 타겟 클릭으로 체크는 가능하지만 타겟이 아닌 다른 오브젝트와 겹치는 경우 실행 X

- 타겟이 아닌 다른 오브젝트들은 콜라이더를 제외하니 해결됨

  

2. 캐릭터가 보이는 ui 만들기

- 로비 화면에서 ui와 같이 플레이어의 캐릭터가 나오도록 하려 함

- ui image로 구현하기에는 움직임이 없고 3d 의 장점이 사라지는 것 같아 고민

- ui의 배경을 지우고 버튼(상호작용) 들은 남겨두고 3d 오브젝트 들이 화면에 보이도록 함

- 바닥, 뒷 배경 오브젝트와 바닥위에 캐릭터를 올려둔 후 사이드뷰 방식으로 보이도록 해결

  

  

3. 게임 진행방식 최적화에 대한 고민

  

1번 - 씬 자체를 프리펩화 해서 생성할 수는 없는건가?

-> 하나의 오브젝트에 모든걸 넣어서 프리펩 하자

  

2번 - 스크립트에 오브젝트(프리펩)을 넣으면 생기는 효과는?

이렇게 한다고 오브젝트의 씬 이동 문제가 해결되는 것이 아님 / 굳이 할 필요 x

  

2.1 - 다른 씬에서 Instantiate 하는 경우 버튼 내부 함수가 빠지거나 하는 경우 (스크립트에서 찾은 후 캐싱하는 등이 최선인건지)

FIND, TAG 등의 방식으로 찾아서 캐싱을 해두고 사용한다 / 이래서 싱글톤이 좋은거

  

3번 - UI를 프리펩화 한 후 생성해서 쓰고 삭제하는 식의 방식을 사용해보려고 함

+1개의 메인 씬에서 게임이 진행될 예정

  

  

3.1 -> 미리 생성해두고 setactive만 수정하는 것 vs그때그때 Instantiate

-생성의 빈도에 따라 다르다 / 기준은 없음 / 본인 기준에 생성, 파괴가 잦으면 SETACTIVE가 더 효율적 / 너무 많으면 비효율적 아닌가? 그런 INSTANTIATE / 손익 분기점이 있음

30번 정도 생성과 파괴가 반복됨 -> 오브젝트 풀 고려

-> 가비지 컬렉션을 줄이는 것이 목표이다

  

  

3.2 -> 하이어라키 창을 꼭 비워둬야만 하는 것인가?  

(고정적인 UI 등의 경우)

캔버스를 나누는 것은 도움이 되지만 (특히 정적, 동적 UI) 

  

  

4번 - 크기가 큰 프리펩(여러가지 오브젝트를 한번에 가지고 있음)의 경우 

-> 필요한 순간에 생성 VS 미리 생성해두고 필요하면 ACTIVE

- 높은 확률로 등장하는가? 등등의 여러가지 생각할 이유가 많다

-> 미리 생성해두면 내부 스크립트의 AWAKE, START 함수 실행 여부 

- 콜백 같은걸 걸어줄 수 있다 / EX) ONGET 

  

  

최적화는 통계적인 접근

보통 타겟 디바이스가 있음 

완성이 먼저고 리펙토링은 나중이