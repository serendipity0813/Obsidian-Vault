![[스크린샷 2024-03-15 111430.png]]

## **✅게임제목** : 탕후루 타이쿤

### [https://github.com/serendipity0813/Tanghuru_Taikun.git](https://github.com/serendipity0813/Tanghuru_Taikun.git)

### 장르 : 2D 캐주얼 타이쿤 게임

### 개발기간 : [24.01.02~24.01.08]

### 내용 : 생산되는 과일을 소모하여 탕후루를 제작하고, 손님에게 판매 후 재화를 획득하고 새로운 재료, 아이템, 효과 등을 통해 더 많은 재화를 추구하는 게임

# 주요 구현사항

---

### 플레이어 이동 및 상호작용 구현사항

- 플레이어 방향에 따른 스프라이트 변경, Raycast 방향 변경
- LayerMask 활용한 상호작용 오브젝트 판단 기능 구현
- 오브젝트 Tag 별 상호작용 기능 구현 (아이템 생성, 판매 등)
- 상호작용시 효과음 및 파티클 효과 구현

### 아이템 데이터 관리 로직 구현

- 싱글톤, ENUM을 활용한 아이템 관련 변수, 메소드 관리
- 상호작용 오브젝트 이름을 통한 생성 아이템 구분
- 매개변수 전달을 통한 아이템 생성 갯수 및 재화 관리

### UI 관련 구현사항

- 핫키 활용 UI 토글기능
- 메인화면 및 컨텐츠 관련 UI 구현
- 배경음악 및 효과음, 이펙트 등의 구현 (EffectManager)
- 플레이어 돈, 레벨 등등의 정보 UI 구현
- 거리 기반 상호작용 프롬프트 텍스트 온오프 기능

### 컨텐츠 구현사항

- 탕후루 만들기 미니게임 구현
    - 게임시작 후 조리대 상호작용 후 첫 번째 탕후루 제작 버튼 누르면 미니게임 시작
    - 막대기를 정렬하고 과일을 12개 끼우면 다음 스테이지 시작 가능
    - PUSH 버튼을 누르면 냄비에 탕후루가 들어가고 알맞은 타이밍에 PULL버튼을 누르면 클리어 - 슬라이더와 Fixed Update 활용
- 퀘스트 기능 구현
    - 플레이어 특정 레벨 달성시에 퀘스트 언락되도록 구현
    - 스크립트 내용에 맞춰 특정 조건 달성시 퀘스트 자동 클리어
    - 퀘스트 클리어시 플레이어가 돈 획득
    - 퀘스트 창 관련 ui 구현 + 퀘스트 내용 구현
- 상점 기능 구현
    - 확률강화를 통해 플레이어의 수익률이 일정 수치 증가할 수 있도록 하는 기능 구현
    - 확률뽑기를 통해 플레이어의 재료수급 갯수, 탕후루 제작 갯수에 영향을 주는 기능 구현

### 팀원 협업 구현사항

- 농장에서의 재료 생산물을 플레이어에게 넘겨주는 과정 구현
- 손님이 재료 선택 후 플레이어에게 금액을 지불해주는 로직 구현
- 각자 씬에서 작업한 내용을 메인 씬에서 합치는 작업 진행

### 버그 수정사항

- 손님의 탕후루 구매시 갯수가 부족해도 구매하여 돈이 들어오는 버그 수정
- 손님이 경로를 찾지 못하여 출구로 나가지 못하는 버그 수정
- 재료상점에서 구매시 탕후루 막대 갯수가 연동되지 않는 버그 수정
- 특정 디스플레이 오브젝트 제외 디스플레이 인벤토리 오픈되지 않는 버그 수정
- 체인점 업그레이드시 돈이 부족해도 구매 가능하거나 돈이 2배로 나가는 버그 수정
- 현재 퀘스트 디스크립션이 업데이트 되지 않는 버그 수정

# 트러블슈팅

---

## Raycast 출력 방향 변화 및 거리 조절

### Raycast 활용 미숙 - 여러가지 함수 직접 사용, 매개변수를 변경하며 적용 시도

- 상하좌우 키 입력시 마다 해당 방향으로 Raycast 방향이 변경되도록 구현
- 매개변수 조절을 통해 Raycast 발사 범위 조절

## 다른 오브젝트 변수, 함수 참조의 어려움

### 스크립트 내부에서 다른 오브젝트, 컴포넌트 등을 찾는 다양한 방식 시도

- 무분별한 싱글톤 사용 지양, Find함수 비효율성, 하이어라키 창의 데이터 손실 방지 등
- Raycast를 활용한 오브젝트 참조 및 컴포넌트 접근
- Getchild, Inparents 등을 활용한 상위, 하위 오브젝트의 컴포넌트 참조
- FindWithTag를 활용, 버튼을 활용한 ui 오브젝트 메소드 참조