
**메멘토 패턴**

<aside> 💡 메멘토 패턴은 뒤로 돌아갈 수 있도록 구현하는 것을 말합니다. 예를 들어, 게임을 플레이하다가 죽었을 때, 1초정도의 순간을 저장해두고, 이를 역재생할 수 있겠죠? 아니면 유니티 같은 프로그램을 쓰다가 잘못했을 때 Ctrl+Z를 통해서 돌아가고 싶을 수 있죠? 이렇게 **돌아갈 수 있도록 설계**하는 방법을 **메멘토** 패턴이라고 하며, 명령 패턴을 활용하여 쉽게 구현할 수 있답니다.

방법 : 명령 패턴으로 구현한다음에 명령들을 리스트에 넣고 역으로 읽으면 끝!

</aside>

![[Pasted image 20240122210131.png]]

> 특이하게도 영화 전개는 시간순이 아닌 역순이고, 흑백으로 나오는 과거 이야기는 시간순이다. 그러한 극 전개가 과거 기억과 맞물리게 된다. 그렇기에 잠깐이라도 장면을 놓친다면 내용을 따라가기가 힘든 영화다.

- 예시 1 - 되돌리기
    
    ```csharp
    using System.Collections;
    using System.Collections.Generic;
    using UnityEngine;
    
    public class TimeBody : MonoBehaviour {
    
    	bool isRewinding = false;
    
    	public float recordTime = 5f;
    
    	List<PointInTime> pointsInTime;
    
    	Rigidbody rb;
    
    	// Use this for initialization
    	void Start () {
    		pointsInTime = new List<PointInTime>();
    		rb = GetComponent<Rigidbody>();
    	}
    	
    	// Update is called once per frame
    	void Update () {
    		if (Input.GetKeyDown(KeyCode.Return))
    			StartRewind();
    		if (Input.GetKeyUp(KeyCode.Return))
    			StopRewind();
    	}
    
    	void FixedUpdate ()
    	{
    		if (isRewinding)
    			Rewind();
    		else
    			Record();
    	}
    
    	void Rewind ()
    	{
    		if (pointsInTime.Count > 0)
    		{
    			PointInTime pointInTime = pointsInTime[0];
          transform.position = pointInTime.position;
    			transform.rotation = pointInTime.rotation;
    			pointsInTime.RemoveAt(0);
    		} else
    		{
    			StopRewind();
    		}
    		
    	}
    
    	void Record ()
    	{
    		if (pointsInTime.Count > Mathf.Round(recordTime / Time.fixedDeltaTime))
    		{
    			pointsInTime.RemoveAt(pointsInTime.Count - 1);
    		}
    
    		pointsInTime.Insert(0, new PointInTime(transform.position, transform.rotation));
    	}
    
    	public void StartRewind ()
    	{
    		isRewinding = true;
    		rb.isKinematic = true;
    	}
    
    	public void StopRewind ()
    	{
    		isRewinding = false;
    		rb.isKinematic = false;
    	}
    }
    ```
    

