
## Singleton
--- 

싱글톤 패턴은 한 개의 인스턴스만 생성하고, 어디서든 그 인스턴스에 접근할 수 있는 디자인 패턴입니다.

대부분 사람들이 싱글톤을 쓰는 이유 : **객체 간 접근이 편하니까** / **중앙집중식 관리가 머리 안아픔**

1. **전역적인 상태나 리소스에 접근**: 싱글톤은 어디서든 접근할 수 있는 전역적인 상태나 리소스에 대한 중앙 집중적인 접근을 제공합니다. 예를 들어, 게임의 설정, 오디오 관리자, 이벤트 매니저 등을 싱글톤으로 구현할 수 있습니다. **한 가지의 상태로, 하나가 주가 되어서 관리했으면 좋겠다!**
2. **중복 인스턴스 방지**: 싱글톤 패턴을 사용하면 오직 한 개의 인스턴스만 생성되므로, 중복 인스턴스를 방지할 수 있습니다. 이는 리소스 낭비나 예기치 않은 동작을 방지하는 데 도움이 됩니다.
3. **객체 간 편한 통신**: 싱글톤 인스턴스는 어디서든 접근할 수 있으므로, 객체 간의 통신이 편리해집니다. 다른 객체에서 싱글톤 인스턴스를 사용해 **데이터를 공유하거나 메서드를 호출**할 수 있습니다. // 슈퍼싱글톤 → 단일책임원칙 망가짐 → 유지보수성 떨어지고, 결합도 높아짐
4. **유지보수 및 확장성**: 싱글톤 패턴은 코드의 유지보수성과 확장성을 향상시킵니다. 인스턴스에 대한 접근이 중앙 집중화되므로, 코드의 변경이나 기능의 추가/변경이 용이해집니다. 또한, 싱글톤 인스턴스를 사용하는 객체들 사이의 **결합도를 낮출 수 있어** 유지보수성을 향상시킵니다.

### 싱글톤 특징 정리
---

**1. 전역적인 상태나 리소스 구현 가능 (게임 설정)**

- 한 가지의 상태로, 하나가 주가 되어 관리하면 좋다**
- 중복 인스턴스 생성이 방지된다**

**2. 객체 간 편한 통신, 데이터 공유 및 메서드 호출이 용이함**

- 슈퍼싱글톤은 만들지 말자 (단일책임원칙)

**3. 유지보수 및 확장성 향상** 

- 씬 전환시 주의점 : 라이프 사이클은 씬마다 발생하지 않음 (AWAKE, START 사용 주의)

- 다양한 manager를 만들고 싶을 때 generic싱글톤 사용**

- 코드를 완벽하기 이해하기 보다는 눈에 익히고 사용하기

**4. 주의사항

- 상호 의존성 증가 / 코드의 복잡성 증가**

- 대형 회사에서는 유지 보수성의 문제로 인해 사용을 지양함**

- 여러개 존재하는 싱글톤 생성하지 않기**

- 일반적인 클래스에 manager 사용하지 않기**




- 싱글톤 1 (국룰 싱글톤)
    
    ```csharp
    public class GameManager : MonoBehaviour
    {
        public static GameManager Instance { get; private set; }
    
        void Awake()
        {
            if (Instance == null)
            {
                Instance = this;
            }
            else
            {
                Destroy(gameObject); // 중복 인스턴스가 생성될 경우 제거
            }
        }
    }
    ```
    
- 싱글톤 2 (씬 전환 싱글톤)
    
    **씬 전환 시 주의점 : 라이프사이클은 씬마다 발생하지 않음**
    
    ```csharp
    public class GameManager : MonoBehaviour
    {
        public static GameManager Instance { get; private set; }
    
        void Awake() // 게임오브젝트가 처음으로 켜진 그 순간
        {
            if (Instance == null)
            {
                Instance = this;
                DontDestroyOnLoad(gameObject); // 씬 전환 시 파괴되지 않도록 설정
            }
            else
            {
                Destroy(gameObject); // 중복 인스턴스가 생성될 경우 제거
            }
        }
    
    		public void Init(){
    				// 초기 세팅
    		}
    }
    ```
    
- 싱글톤 3 (Generic 싱글톤)
    
    ```csharp
    using UnityEngine;
    
    public class Singleton<T> : MonoBehaviour where T : MonoBehaviour
    {
        private static T _instance; // Lazy Loading
    
        public static T Instance
        {
            get
            {
                if (_instance == null)
                {
                    _instance = FindObjectOfType<T>();
                    if (_instance == null)
                    {
                        GameObject obj = new GameObject();
                        // obj.name = typeof(T).Name;
                        _instance = obj.AddComponent<T>();
                    }
                }
                return _instance;
            }
        }
    }
    
    public class AudioManager : Singleton<AudioManager>
    {
        public void PlaySound(string soundName)
        {
            // 사운드 재생 로직
        }
    }
    ```
    

**[주의사항]**

- **상호 의존성 증가**: 싱글톤 인스턴스가 여러 부분에서 사용될 경우, 클래스 간의 상호 의존성이 증가하며, 이는 시스템의 결합도를 높이고 응집도를 낮출 수 있습니다.
- **코드의 복잡성**: 싱글톤을 과도하게 사용하면 시스템 전반에 걸쳐 복잡도가 증가할 수 있으며, 이는 유지보수를 어렵게 만듭니다.