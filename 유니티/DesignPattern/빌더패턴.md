
## Builder Pattern
---

1. **빌더**
    
    ![[Pasted image 20240122212201.png]]
    빌더 패턴은 객체의 초기화를 체계적으로 하도록 도와주는 패턴이다. 예를 들어서, 집과 같은 객체는 엄청 복잡한 객체이기 때문에, 한 번 집이라는 객체를 생성한다고 하면 생성자에 엄청 많은 파라미터들이 들어가게 됩니다. DirectX
    
 ![[Pasted image 20240122212213.png]]
    
    그래서 이 단계를 체계적으로 수행하는 디렉터를 두고, 이 디렉터를 통해 수행하도록 하는 것이 빌더 패턴입니다.
    
    ![[Pasted image 20240122212230.png]]
    
    - 예시 - Builder / Director
        
        ```csharp
        using UnityEngine;
        
        public class EnemyDirector {
            public Enemy Construct(EnemyBuilder builder, EnemyData data) {
                builder.AddWeaponComponent();
                builder.AddWeaponStrategy(data.WeaponStrategy);
                builder.AddHealthComponent();
        
                return builder.Build();
            }
        }
        
        public class EnemyBuilder {
            Enemy enemy = new GameObject(name: "Enemy").AddComponent<Enemy>();
        
            public void AddWeaponComponent() {
                enemy.gameObject.AddComponent<EnemyWeapon>();
            }
        
            public void AddWeaponStrategy(WeaponStrategy strategy) {
                if (enemy.gameObject.TryGetComponent<EnemyWeapon>(out var weapon)) {
                    weapon.SetWeaponStrategy(strategy);
                }
            }
        
            public void AddHealthComponent() {
                enemy.gameObject.AddComponent<Health>();
            }
        
            public Enemy Build() {
                Enemy builtEnemy = enemy;
                enemy = new GameObject(name: "Enemy").AddComponent<Enemy>();
        
                return builtEnemy;
            }
        }
        ```
        
    - 예시 - Fluent Builder
        
        ```csharp
        public class Enemy {
        	public string Name {get; private set;}
        	public int Health {get; private set;}
        
        	public Enemy(string name, int health) {
        		Name = name;
        		Health = health;
        	}
        
        		public class EnemyBuilder {
        		string name;
        		int health;
        	
        			public EnemyBuilder WithName(string name) {
        				this.name = name;
        				return this;
        			}
        		
        			public EnemyBuilder WithHealth(int health) {
        				this.health = health;
        				return this;
        			}
        		
        			public Enemy Build(EnemyBuilder enemyBuilder){
        				return new Enemy(name, health);
        			}
        		}
        }
        
        public GameManager : MonoBehaviour {
        	void Start() {
        		Enemy enemy = new Enemy.EnemyBuilder()
        			.WithName("Jiwon")
        			.WithHealth(1000)
        			.Build();
        	}
        }
        
        ```
        
